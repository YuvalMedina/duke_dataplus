# Take rows 1 to n-1 and subtract rows 2 to n:
df$gap <- c(NA, with(df, date[-1] - date[-nrow(df)]))
head(df)
# now, how often was the gap more than some amount of time?
gap_threshold <- 900 # let's say, 30 seconds
my_dat$over_thresh <- my_dat$gap > gap_threshold
# now, how often was the gap more than some amount of time?
gap_threshold <- 900 # let's say, 30 seconds
df$over_thresh <- df$gap > gap_threshold
head(df)
# Take rows 1 to n-1 and subtract rows 2 to n:
df$gap <- c(NA, with(df, date[-1] - date[-nrow(df)]))
my_dat <- read.csv("NC_NHC_DO_mgL.csv")
df <- data.frame(date = as.POSIXct(my_dat$dateTimeUTC), value = my_dat$value)
# Take rows 1 to n-1 and subtract rows 2 to n:
df$gap <- c(NA, with(df, date[-1] - date[-nrow(df)]))
head(df)
df <- data.frame(date = as.POSIXct(my_dat$dateTimeUTC, "%Y-%m-%d %H:%M:%S"), value = my_dat$value)
df <- data.frame(date = as.POSIXct(my_dat$dateTimeUTC, format = "%Y-%m-%d %H:%M:%S"), value = my_dat$value)
df <- data.frame(date = as.POSIXct(my_dat$dateTimeUTC, tz, format = "%Y-%m-%d %H:%M:%S"), value = my_dat$value)
# Take rows 1 to n-1 and subtract rows 2 to n:
df$gap <- c(NA, with(df, date[-1] - date[-nrow(df)]))
df <- data.frame(date = as.POSIXct(my_dat$dateTimeUTC, tz, format = "%Y-%m-%d %H:%M:%S"), value = my_dat$value)
# Take rows 1 to n-1 and subtract rows 2 to n:
df$gap <- c(NA, with(df, date[-1] - date[-nrow(df)]))
head(df)
df <- data.frame(date = as.POSIXct(my_dat$dateTimeUTC, tz, format = "%Y-%m-%d %H:%M:%S"), value = my_dat$value)
df <- data.frame(date = as.POSIXct(my_dat$dateTimeUTC, tz='', format = "%Y-%m-%d %H:%M:%S"), value = my_dat$value)
# Take rows 1 to n-1 and subtract rows 2 to n:
df$gap <- c(NA, with(df, date[-1] - date[-nrow(df)]))
head(df)
# now, how often was the gap more than some amount of time?
gap_threshold <- 900 # let's say, 30 seconds
# now, how often was the gap more than some amount of time?
gap_threshold <- 15 # let's say, 30 seconds
df$over_thresh <- df$gap > gap_threshold
head(df)
gaps <- df$over_thresh == TRUE
head(gaps)
where_gaps = which(gaps)
where_gaps
gap.finding <- function(raw_dat, gap_time){
my_dat <- read.csv(raw_dat)
df <- data.frame(date = as.POSIXct(my_dat$dateTimeUTC, tz='', format = "%Y-%m-%d %H:%M:%S"), value = my_dat$value)
df$gap <- c(NA, with(df, date[-1] - date[-nrow(df)]))
gap_threshold <- gap_time # let's say, 30 seconds
df$over_thresh <- df$gap > gap_threshold
gaps <- df$over_thresh == TRUE
where_gaps = which(gaps)
where_gaps
}
gap.finding("NC_NHC_DO_mgL.csv", 15)
gaps_NC_NHC = gap.finding("NC_NHC_DO_mgL.csv", 15)
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
library(ggplot2)
source("gap_detect.R")
gaps = gap.finding(dirty_file(), time_gap())
gaps = gap.finding("NC_NHC_DO_mgL.csv", 15)
head(gaps)
my_dirty_dat <- read.csv("NC_NHC_DO_mgL.csv")
my_dirty_df <- data.frame(
date = my_dirty_dat$dateTimeUTC,
value = my_dirty_dat$value
)
gaps.length()
lengths(gap)
lengths(gaps)
length(gaps)
for(i in range(length(gaps))){
graph_dat <- my_dirty_df[gaps[i]-100:gaps[i]+100]
plot(graph_dat$date, graph_dat$value)
}
gaps[0]
gaps[0][0]
gaps
as.list(gaps)
gaps[1][1]
gaps[1]
range(length(gaps))
seq(1:length(gaps))
for(i in seq(1:length(gaps))){
graph_dat <- my_dirty_df[gaps[i]-100:gaps[i]+100]
plot(graph_dat$date, graph_dat$value)
}
graph_dat <- my_dirty_df[gaps[i][i]-100:gaps[i][i]+100]
gaps[1]
typeof(gaps[1])
gaps[1]-100
graph_dat <- my_dirty_df[gaps[1]-100:gaps[1]+100]
graph_dat <- my_dirty_df[c(gaps[1]-100:gaps[1]+100)]
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
dat <- read.csv("storm_DO.csv")
head(dat)
install.packages("zoo")
storm_DO <- read.csv("storm_DO.csv")
storm_disch <- read.csv("storm_discharge.csv")
head(storm_DO)
head(storm_disch)
df_DO <- data.frame(
date = storm_DO$dateTimeUTC,
value = storm_DO$value
)
df_disch <- data.frame(
date = storm_disch$dateTimeUTC,
value = storm_disch$value
)
z <- read.zoo(df_disch, index = 2)
z <- read.zoo(df_disch, index = 2)
library(zoo)
z <- read.zoo(df_disch, index = 2)
autoplot(z) +
annotate("rect", fill = "red", alpha = 0.5,
xmin = 1924, xmax = 1928 + 11/12,
ymin = -Inf, ymax = Inf) +
xlab("time") +
ylab("big")
autoplot(z) +
annotate("rect", fill = "red", alpha = 0.5,
xmin = 2017-03-02, xmax = 2017-03-04,
ymin = -Inf, ymax = Inf) +
xlab("Dates") +
ylab("Discharge (m3s)")
autoplot(z) +
annotate("rect", fill = "red", alpha = 0.5,
xmin = 2017-03-02, xmax = 2017-03-04,
ymin = -Inf, ymax = Inf) +
xlab("Dates") +
ylab("Discharge (m3s)")
autoplot(df_disch) +
annotate("rect", fill = "red",
xmin = 2017-03-02, xmax = 2017-03-04,
ymin = -Inf, ymax = Inf) +
xlab("Dates") +
ylab("Discharge (m3s)")
z <- read.zoo(df_disch, index = 2)
ggplot() +
geom_rect(data = data.frame(xmin = decimal_date(as.Date(c("2017-03-02"))),
xmax = decimal_date(as.Date(c("2017-03-04"))),
ymin = -Inf,
ymax = Inf),
aes(xmin = xmin, xmax = xmax, ymin = ymin, ymax = ymax),
fill = "grey", alpha = 0.5) +
geom_line(data = df_disch,aes(date, value), colour = "blue") +
theme_classic()
ggplot() +
geom_rect(data = data.frame(xmin = decimal_date(as.Date(c("2017-03-02"))),
xmax = decimal_date(as.Date(c("2017-03-04"))),
ymin = -Inf,
ymax = Inf),
aes(xmin = xmin, xmax = xmax, ymin = ymin, ymax = ymax),
fill = "grey", alpha = 0.5) +
geom_line(data = df_disch,aes(date, value), colour = "blue") +
theme_classic()
library("lubridate")
library("ggplot2")
ggplot() +
geom_rect(data = data.frame(xmin = decimal_date(as.Date(c("2017-03-02"))),
xmax = decimal_date(as.Date(c("2017-03-04"))),
ymin = -Inf,
ymax = Inf),
aes(xmin = xmin, xmax = xmax, ymin = ymin, ymax = ymax),
fill = "grey", alpha = 0.5) +
geom_line(data = df_disch,aes(date, value), colour = "blue") +
theme_classic()
ggplot() +
geom_rect(data = data.frame(xmin = decimal_date(as.Date(c("2017-03-02"))),
xmax = decimal_date(as.Date(c("2017-03-04"))),
ymin = -Inf,
ymax = Inf),
aes(xmin = xmin, xmax = xmax, ymin = ymin, ymax = ymax),
fill = "grey", alpha = 0.5) +
geom_plot(data = df_disch,aes(date, value), colour = "blue") +
theme_classic()
ggplot() +
geom_rect(data = data.frame(xmin = decimal_date(as.Date(c("2017-03-02"))),
xmax = decimal_date(as.Date(c("2017-03-04"))),
ymin = -Inf,
ymax = Inf),
aes(xmin = xmin, xmax = xmax, ymin = ymin, ymax = ymax),
fill = "grey", alpha = 0.5) +
geom_line(data = df_disch,aes(date, value), colour = "blue") +
theme_classic()
ggplot() +
geom_rect(data = data.frame(xmin = decimal_date(as.Date(c("2017-03-02"))),
xmax = decimal_date(as.Date(c("2017-03-04"))),
ymin = -Inf,
ymax = Inf),
aes(xmin = xmin, xmax = xmax, ymin = ymin, ymax = ymax),
fill = "grey", alpha = 0.5) +
geom_dotplot(data = df_disch,aes(date, value), colour = "blue") +
theme_classic()
ggplot() +
geom_rect(data = data.frame(xmin = decimal_date(as.Date(c("2017-03-02"))),
xmax = decimal_date(as.Date(c("2017-03-04"))),
ymin = -Inf,
ymax = Inf),
aes(xmin = xmin, xmax = xmax, ymin = ymin, ymax = ymax),
fill = "grey", alpha = 0.5) +
geom_dotplot(data = df_disch,aes(date, value), colour = "blue") +
theme_classic()
ggplot() +
geom_rect(data = data.frame(xmin = decimal_date(as.Date(c("2017-03-02"))),
xmax = decimal_date(as.Date(c("2017-03-04"))),
ymin = -Inf,
ymax = Inf),
aes(xmin = xmin, xmax = xmax, ymin = ymin, ymax = ymax),
fill = "grey", alpha = 0.5)
geom_dotplot(data = df_disch,aes(date, value), colour = "blue") +
theme_classic()
ggplot() +
geom_rect(data = data.frame(xmin = decimal_date(as.Date(c("2017-03-02"))),
xmax = decimal_date(as.Date(c("2017-03-04"))),
ymin = -Inf,
ymax = Inf),
aes(xmin = xmin, xmax = xmax, ymin = ymin, ymax = ymax),
fill = "grey", alpha = 0.5) +
geom_dotplot(data = df_disch,aes(date, value), colour = "blue") +
theme_classic()
ggplot() +
geom_rect(data = data.frame(xmin = decimal_date(as.Date(c("2017-03-02"))),
xmax = decimal_date(as.Date(c("2017-03-04"))),
ymin = -Inf,
ymax = Inf),
aes(xmin = xmin, xmax = xmax, ymin = ymin, ymax = ymax),
fill = "grey", alpha = 0.5) +
geom_dotplot(data = df_disch,aes(date, value), colour = "blue") +
theme_classic()
ggplot() +
geom_rect(data = data.frame(xmin = decimal_date(as.Date(c("2017-03-02"))),
xmax = decimal_date(as.Date(c("2017-03-04"))),
ymin = -Inf,
ymax = Inf),
aes(xmin = xmin, xmax = xmax, ymin = ymin, ymax = ymax),
fill = "grey", alpha = 0.5) +
geom_dotplot(data = df_disch,aes(date, value), colour = "blue") +
theme_classic()
ggplot() +
geom_rect(data = data.frame(xmin = decimal_date(as.Date(c("2017-03-02"))),
xmax = decimal_date(as.Date(c("2017-03-04"))),
ymin = -Inf,
ymax = Inf),
aes(xmin = xmin, xmax = xmax, ymin = ymin, ymax = ymax),
fill = "grey", alpha = 0.5)
ggplot() +
geom_rect(data = data.frame(xmin = decimal_date(as.Date(c("2017-03-02"))),
xmax = decimal_date(as.Date(c("2017-03-04"))),
ymin = -Inf,
ymax = Inf),
aes(xmin = xmin, xmax = xmax, ymin = ymin, ymax = ymax),
fill = "red", alpha = 0.5)
ggplot(a_series_df, aes(month, big)) +
geom_line() +
annotate("rect", fill = "red", alpha = 0.5,
xmin = 1924, xmax = 1928 + 11/12,
ymin = -Inf, ymax = Inf) +
xlab("time")
ggplot(df_disch, aes(date, value)) +
geom_line() +
annotate("rect", fill = "red", alpha = 0.5,
xmin = 2017, xmax = 2017 + 11/12,
ymin = -Inf, ymax = Inf) +
xlab("time")
ggplot(df_disch, aes(date, value)) +
geom_line() +
annotate("rect", fill = "red", alpha = 0.5,
xmin = as.Date(c("2017-03-02")), xmax = as.Date(c("2017-03-04")),
ymin = -Inf, ymax = Inf) +
xlab("time")
ggplot() +
geom_rect(data = data.frame(xmin = decimal_date(as.Date(c("2017-03-02"))),
xmax = decimal_date(as.Date(c("2017-03-04"))),
ymin = -Inf,
ymax = Inf),
aes(xmin = xmin, xmax = xmax, ymin = ymin, ymax = ymax),
fill = "red", alpha = 0.5)
ggplot() +
geom_rect(data = data.frame(xmin = (as.Date(c("2017-03-02"))),
xmax = (as.Date(c("2017-03-04"))),
ymin = -Inf,
ymax = Inf),
aes(xmin = xmin, xmax = xmax, ymin = ymin, ymax = ymax),
fill = "red", alpha = 0.5)
bounds = data.frame(x1=c(as.Date("2017-03-02")), x2=c(as.Date("2017-03-04")), y1=-Inf, y2=Inf)
ggplot(df_disch, aes(date, value)) +
geom_rect(data = d,
mapping = aes(xmin = x1, xmax = x2, ymin = y1, ymax = y2),
fill = "red", alpha = 0.5)
d=data.frame(x1=c(1,3,1,5,4), x2=c(2,4,3,6,6), y1=c(1,1,4,1,3), y2=c(2,2,5,3,5), t=c('a','a','a','b','b'), r=c(1,2,3,4,5))
bounds = data.frame(x1=c(as.Date("2017-03-02")), x2=c(as.Date("2017-03-04")), y1=-Inf, y2=Inf)
ggplot(df_disch, aes(date, value)) +
geom_rect(data = bounds,
mapping = aes(xmin = x1, xmax = x2, ymin = y1, ymax = y2),
fill = "red", alpha = 0.5)
ggplot(df_disch, aes(date, value)) +
geom_rect(data = bounds,
mapping = aes(xmin = x1, xmax = x2, ymin = y1, ymax = y2),
color = "black", alpha = 0.5)
ggplot(df_disch, aes(date, value)) +
geom_line() +
annotate("rect", fill = "red", alpha = 0.5,
xmin = as.Date(c("2017-03-02")), xmax = as.Date(c("2017-03-04")),
ymin = -Inf, ymax = Inf) +
xlab("time")
ggplot(df_disch, aes(date, value)) +
geom_rect(data = bounds,
mapping = aes(xmin = x1, xmax = x2, ymin = y1, ymax = y2),
color = "black", alpha = 0.5)
ggplot(df_disch, aes(date, value)) +
geom_rect(data = bounds,
mapping = aes(xmin = x1, xmax = x2, ymin = y1, ymax = y2),
fill="red",color = "black", alpha = 0.5)
ggplot() +
geom_rect(data = bounds,
mapping = aes(xmin = x1, xmax = x2, ymin = y1, ymax = y2),
fill="red",color = "black", alpha = 0.5)
ggplot() +
geom_rect(data = bounds,
mapping = aes(xmin = x1, xmax = x2, ymin = y1, ymax = y2),
fill="red",color = "black", alpha = 0.5) +
geom_dotplot(data = df_disch, mapping=aes(date, value))
ggplot() +
geom_rect(data = bounds,
mapping = aes(xmin = x1, xmax = x2, ymin = y1, ymax = y2),
fill="red",color = "black", alpha = 0.5) +
geom_dotplot(data = df_disch,)
ggplot() +
geom_rect(data = bounds,
mapping = aes(xmin = x1, xmax = x2, ymin = y1, ymax = y2),
fill="red",color = "black", alpha = 0.5) +
geom_dotplot(data = df_disch)
ggplot() +
geom_rect(data = bounds,
mapping = aes(xmin = x1, xmax = x2, ymin = y1, ymax = y2),
fill="red",color = "black", alpha = 0.5) +
geom_dotplot(data = df_disch, aes(df_disch$date, df_disch$value))
ggplot() +
scale_x_continuous(name="x") +
scale_y_continuous(name="y") +
geom_rect(data = bounds,
mapping = aes(xmin = x1, xmax = x2, ymin = y1, ymax = y2),
fill="red",color = "black", alpha = 0.5) +
geom_dotplot(data = df_disch, aes(df_disch$date, df_disch$value))
ggplot() +
geom_rect(data = bounds,
mapping = aes(xmin = x1, xmax = x2, ymin = y1, ymax = y2),
fill="red",color = "black", alpha = 0.5) +
geom_dotplot(data = df_disch, aes(df_disch$date, df_disch$value))
ggplot() +
geom_rect(data = bounds,
mapping = aes(xmin = x1, xmax = x2, ymin = y1, ymax = y2),
fill="red",color = "black", alpha = 0.5) +
#geom_dotplot(data = df_disch, aes(df_disch$date, df_disch$value))
d=data.frame(x1=c(1,3,1,5,4), x2=c(2,4,3,6,6), y1=c(1,1,4,1,3), y2=c(2,2,5,3,5), t=c('a','a','a','b','b'), r=c(1,2,3,4,5))
ggplot() +
geom_rect(data = bounds,
mapping = aes(xmin = x1, xmax = x2, ymin = y1, ymax = y2),
fill="red",color = "black", alpha = 0.5) +
#geom_dotplot(data = df_disch, aes(df_disch$date, df_disch$value))
d=data.frame(x1=c(1,3,1,5,4), x2=c(2,4,3,6,6), y1=c(1,1,4,1,3), y2=c(2,2,5,3,5), t=c('a','a','a','b','b'), r=c(1,2,3,4,5))
ggplot() +
scale_x_continuous(name="x") +
scale_y_continuous(name="y") +
geom_rect(data=d, mapping=aes(xmin=x1, xmax=x2, ymin=y1, ymax=y2, fill=t), color="black", alpha=0.5) +
geom_text(data=d, aes(x=x1+(x2-x1)/2, y=y1+(y2-y1)/2, label=r), size=4) +
opts(title="geom_rect", plot.title=theme_text(size=40, vjust=1.5))
ggplot() +
geom_rect(data = bounds,
mapping = aes(xmin = x1, xmax = x2, ymin = y1, ymax = y2),
fill="red",color = "black", alpha = 0.5) +
#geom_dotplot(data = df_disch, aes(df_disch$date, df_disch$value))
d=data.frame(x1=c(1,3,1,5,4), x2=c(2,4,3,6,6), y1=c(1,1,4,1,3), y2=c(2,2,5,3,5), t=c('a','a','a','b','b'), r=c(1,2,3,4,5))
d=data.frame(x1=c(1,3,1,5,4), x2=c(2,4,3,6,6), y1=c(1,1,4,1,3), y2=c(2,2,5,3,5), t=c('a','a','a','b','b'), r=c(1,2,3,4,5))
ggplot() +
scale_x_continuous(name="x") +
scale_y_continuous(name="y") +
geom_rect(data=d, mapping=aes(xmin=x1, xmax=x2, ymin=y1, ymax=y2, fill=t), color="black", alpha=0.5) +
geom_text(data=d, aes(x=x1+(x2-x1)/2, y=y1+(y2-y1)/2, label=r), size=4) +
opts(title="geom_rect", plot.title=theme_text(size=40, vjust=1.5))
df_disch <- data.frame(
date = storm_disch$dateTimeUTC,
value = storm_disch$value
)
ggplot() +
scale_x_continuous(name="x") +
scale_y_continuous(name="y") +
geom_rect(data=d, mapping=aes(xmin=x1, xmax=x2, ymin=y1, ymax=y2, fill=t), color="black", alpha=0.5) +
geom_text(data=d, aes(x=x1+(x2-x1)/2, y=y1+(y2-y1)/2, label=r), size=4)
ggplot() +
scale_x_continuous(name="x") +
scale_y_continuous(name="y") +
geom_rect(data=boungs, mapping=aes(xmin=x1, xmax=x2, ymin=y1, ymax=y2, fill=t), color="black", alpha=0.5) +
geom_text(data=d, aes(x=x1+(x2-x1)/2, y=y1+(y2-y1)/2, label=r), size=4)
df_disch <- data.frame(
date = storm_disch$dateTimeUTC,
value = storm_disch$value
)
ggplot() +
scale_x_continuous(name="x") +
scale_y_continuous(name="y") +
geom_rect(data=bounds, mapping=aes(xmin=x1, xmax=x2, ymin=y1, ymax=y2, fill=t), color="black", alpha=0.5) +
geom_text(data=d, aes(x=x1+(x2-x1)/2, y=y1+(y2-y1)/2, label=r), size=4)
ggplot() +
scale_x_continuous(name="x") +
scale_y_continuous(name="y") +
geom_rect(data=bounds, mapping=aes(xmin=x1, xmax=x2, ymin=y1, ymax=y2, fill=t), color="black", alpha=0.5) +
geom_text(data=d, aes(x=x1+(x2-x1)/2, y=y1+(y2-y1)/2, label=r), size=4)
ggplot() +
scale_x_continuous(name="x") +
scale_y_continuous(name="y") +
geom_rect(data=bounds, mapping=aes(xmin=x1, xmax=x2, ymin=y1, ymax=y2, fill=t), color="black", alpha=0.5) +
geom_text(data=bounds, aes(x=x1+(x2-x1)/2, y=y1+(y2-y1)/2, label=r), size=4)
bounds = data.frame(x1=c(as.Date("2017-03-02")), x2=c(as.Date("2017-03-04")), y1=-Inf, y2=Inf)
ggplot(df_disch, aes(date, value)) +
geom_point()+
geom_rect(data = data.frame(xmin = decimal_date(as.Date(c("1924-01-01"))),
xmax = decimal_date(as.Date(c("1928-12-31"))),
ymin = -Inf,
ymax = Inf),
aes(xmin = xmin, xmax = xmax, ymin = ymin, ymax = ymax),
fill = "grey", alpha = 0.5)
ggplot(df_disch, aes(date, value)) +
geom_point()+
geom_rect(data = data.frame(xmin = decimal_date(as.Date(c("1924-01-01"))),
xmax = decimal_date(as.Date(c("1928-12-31"))),
ymin = -Inf,
ymax = Inf),
aes(xmin = xmin, xmax = xmax, ymin = ymin, ymax = ymax),
fill = "grey", alpha = 0.5)
df_disch <- data.frame(
date = storm_disch$dateTimeUTC,
values = storm_disch$value
)
library("lubridate")
library("ggplot2")
ggplot(df_disch, aes(date, values)) +
geom_point()+
geom_rect(data = data.frame(xmin = decimal_date(as.Date(c("1924-01-01"))),
xmax = decimal_date(as.Date(c("1928-12-31"))),
ymin = -Inf,
ymax = Inf),
aes(xmin = xmin, xmax = xmax, ymin = ymin, ymax = ymax),
fill = "grey", alpha = 0.5)
ggplot(df_disch, aes(x=date, y=values)) +
geom_point()+
geom_rect(data = data.frame(xmin = decimal_date(as.Date(c("1924-01-01"))),
xmax = decimal_date(as.Date(c("1928-12-31"))),
ymin = -Inf,
ymax = Inf),
aes(xmin = xmin, xmax = xmax, ymin = ymin, ymax = ymax),
fill = "grey", alpha = 0.5)
ggplot(df_disch, aes(x=date, y=values)) +
geom_point()
ggplot() +
geom_point(df_disch, aes(x=date, y=values))
ggplot() +
geom_point(df_disch, mapping=aes(x=date, y=values))
ggplot() +
geom_point(df_disch, mapping=aes(x=date, y=values))+
geom_rect(data = data.frame(xmin = decimal_date(as.Date(c("1924-01-01"))),
xmax = decimal_date(as.Date(c("1928-12-31"))),
ymin = -Inf,
ymax = Inf),
aes(xmin = xmin, xmax = xmax, ymin = ymin, ymax = ymax),
fill = "grey", alpha = 0.5)
plot(df_disch$date, df_disch$value)
ggplot() +
geom_point(df_disch, mapping=aes(x=date, y=values))
ggplot() +
geom_point(df_disch, mapping=aes(x=date, y=values))+
geom_rect(data = data.frame(xmin = decimal_date(as.Date(c("1924-01-01"))),
xmax = decimal_date(as.Date(c("1928-12-31"))),
ymin = -Inf,
ymax = Inf),
aes(xmin = xmin, xmax = xmax, ymin = ymin, ymax = ymax),
fill = "red", alpha = 0.5)
